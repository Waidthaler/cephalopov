<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>CephaloPOV Documentation</title>
<style type="text/css">
	body,table,input { font: 10pt Arial,Helvetica,sans-serif; }
    body { width: 7.5in; margin-left: auto; margin-right: auto; }
	div.code { white-space: pre; font: 10pt Consolas,Courier,fixed; background-color: #EEF; border: 1px solid #CCF; margin-top: 1em; padding: 1em; }
    code { font: 10pt Consolas,Courier,fixed; }
    pre { font: 10pt Consolas,Courier,fixed; }
    h2 { font-size: 16pt; color: white; background-color: #666; border: 2pt solid black; padding: 0.25em 0.0em 0.25em 0.5em; margin-top: 2em; margin-bottom: 0.3em; }
    h3 { font-size: 14pt; border-bottom: 1.5pt solid black; margin-top: 1.5em; margin-bottom: 0.2em; }
    h4 { font-size: 12pt; margin-top: 1em; margin-bottom: 0.2em; }
    p { margin-top: 0em; margin-bottom: 0.75em; }

    table.matrixDemo { background-color: black; border-spacing: 1pt; margin-left: auto; margin-right: auto; font-size: 90%; margin-top: 1em; margin-bottom: 2em; }
    table.matrixDemo th { color: white; width: 20%; padding: 0.5em; }
    table.matrixDemo td { background-color: white; vertical-align: top; padding: 0.25em; }
    table.matrixDemo td.implicit { background-color: #CCC; }
    table.matrixDemo td.scale { background-color: #FAA; }
    table.matrixDemo td.translate { background-color: #AAF; }
    table.matrixDemo td.skew { background-color: #AFA; }
    table.matrixDemo td.rotate { background-color: #FAA; }
    table.matrixDemo td.ident { background-color: #AAF; }
    table.matrixDemo td.null { background-color: #CCC; }
    table.matrixDemo div.cpName { text-align: center; font: bold 10pt Consolas,Courier,fixed; }
    table.matrixDemo div.op { text-align: center; font-weight: bold; margin-top: 0.25em; }

    .floatCenter { margin-left: auto; margin-right: auto; }

    table.sgrid { background-color: black; border-spacing: 1pt; margin-top: 1em; }
    table.sgrid thead { color: white; }
    table.sgrid tbody { background-color: white; }
    table.sgrid td { padding-left: 0.5em; padding-right: 0.5em; }
    table.sgrid td.pending { text-align: center; background-color: red;    color: yellow; font-weight: bold; white-space: nowrap; }
    table.sgrid td.working { text-align: center; background-color: yellow; color: red;    font-weight: bold; white-space: nowrap; }
    table.sgrid td.done    { text-align: center; background-color: green;  color: white;  font-weight: bold; white-space: nowrap; }
    table.sgrid td.tbd     { text-align: center; background-color: #888;   color: white;  font-weight: bold; white-space: nowrap; }
    table.sgrid td.subtask { padding-left: 3em; }

    table.todo { width: 100%; }

</style>
</head>
<body>
<img src='cplogo_small.png' style='float: right; margin-left: 1em; margin-bottom: 1em;'><h1>CephaloPOV Documentation</h1>

<p><i>Before CephaloPOV reaches a preliminary beta phase, this will
be the user manual. Right now, it's mostly notes.</i></p>

<br/><br/>

<h2>1: Introduction</h2>

<p>CephaloPOV is a JavaScript scripting engine for POV-Ray. It is implemented as
a Node command line program that loads a user script and executes it in an
environment in which it can manipulate various JavaScript classes that map to
POV-Ray's native objects, in addition to having full access to the Node
ecosystem. CephaloPOV takes care of generating POV-Ray Scene Description
Language files, both for static scenes and multi-frame animations.</p>

<h2>Appendix A: Matrices</h2>

<p>SDL matrices are an abbreviated form of the entire matrix being used. The
fourth column is invariant and therefore omitted from its SDL representation and
inaccessible within CephaloPOV, but we show it below in grey for the
math-curious. You <em>don't</em> have to know much about matrix math to use the
<code>Matrix</code> class. Like SDL, CephaloPOV offers shortcuts to the
individual transformations in the form of special arguments to the
<code>Matrix</code> constructor and the <code>apply</code> method.</p>

<h3>Translation, Scaling, and Skewing</h3>

<p>Red elements determine scaling, blue elements determine translation, and
green elements determine skewing. (The grey elements, as previously mentioned,
are invariant and hidden in both POV-Ray and CephaloPOV.) Note that there are
three elements for each axis when scaling and translating, but there are six
elements for skewing, because skew transformations involve relationships between
pairs of axes.</p>

<table class='matrixDemo'>
    <tr><th></th><th>Column<br/>0</th><th>Column<br/>1</th><th>Column<br/>2</th><th>Column<br/>3</th></tr>
    <tr>
        <th>Row<br/>0</th>
        <td class='scale'><div class='cpName'>v00</div><div class='op'>Scale X</div></td>
        <td class='skew'><div class='cpName'>v01</div><div class='op'>Skew Y by X</div></td>
        <td class='skew'><div class='cpName'>v02</div><div class='op'>Skew Z by X</div></td>
        <td class='implicit'><div class='cpName'>(v03)</div><div class='op'>0</div></td>
    </tr><tr>
        <th>Row<br/>1</th>
        <td class='skew'><div class='cpName'>v10</div><div class='op'>Skew X by Y</div></td>
        <td class='scale'><div class='cpName'>v11</div><div class='op'>Scale Y</div></td>
        <td class='skew'><div class='cpName'>v12</div><div class='op'>Skew Z by Y</div></td>
        <td class='implicit'><div class='cpName'>(v13)</div><div class='op'>0</div></td>
    </tr><tr>
        <th>Row<br/>2</th>
        <td class='skew'><div class='cpName'>v20</div><div class='op'>Skew X by Z</div></td>
        <td class='skew'><div class='cpName'>v21</div><div class='op'>Skew Y by Z</div></td>
        <td class='scale'><div class='cpName'>v22</div><div class='op'>Scale Z</div></td>
        <td class='implicit'><div class='cpName'>(v23)</div><div class='op'>0</div></td>
    </tr><tr>
        <th>Row<br/>3</th>
        <td class='translate'><div class='cpName'>v30</div><div class='op'>Translate X</div></td>
        <td class='translate'><div class='cpName'>v31</div><div class='op'>Translate Y</div></td>
        <td class='translate'><div class='cpName'>v32</div><div class='op'>Translate Z</div></td>
        <td class='implicit'><div class='cpName'>(v33)</div><div class='op'>1</div></td>
    </tr>
</table>

<p>An important thing to notice here is that while the matrix elements that
determine translation and skewing are 0 if no translation or skewing is to be
done, the elements that define scaling must be 1 when no scaling is to be done,
i.e., it's an identity element. Setting the scaling elements to zero will make
the object disappear!</p>

<p>Another thing to notice about scaling is that negative values will
<em>reflect</em> the object across the relevant axis. In the special case of 1,
this will be a perfect mirror image; other values will stretch or squash the
object.</p>

<h3>Rotation</h3>

<p>Rotation is a little more complicated because it requires the use of
trigonometric functions. This is handled for you by the Matrix class'
<code>rotate</code> constructor argument, but it's worth understanding in case
you want to try doing the calculations yourself or trying variations to see what
they do.</p>

<p>Since the values for rotations around the axes overlap, we'll omit the
invariant fourth column and the translation row so we can cram all three
rotation matrices into a single row. In this case, we'll color the rotation
elements red, the single scale identity element blue, and everything else grey.
If you're entirely innocent of trigonometry, know that <i>cos</i> and <i>sin</i>
are the trigonometric functions cosine and sine, which are implemented in
JavaScript as the <code>Math.cos()</code> and <code>Math.sin()</code> methods.
The angle of rotation is conventionally represented by the Greek letter theta,
&theta;, and is specified in radians, though POV-Ray and CephaloPOV expect you
to use degrees instead and quietly translate degrees into radians for you.</p>


<table style='width: 100%;'>
    <tr>
        <td style='width: 33%;'>

            <table class='matrixDemo'>
                <tr><th colspan='4'>Rotation around the X axis</th></tr>
                <tr><th></th><th>Col.<br/>0</th><th>Col.<br/>1</th><th>Col.<br/>2</th></tr>
                <tr>
                    <th>Row<br/>0</th>
                    <td class='ident'><div class='cpName'>v00</div><div class='op'>1</div></td>
                    <td class='null'><div class='cpName'>v01</div><div class='op'>0</div></td>
                    <td class='null'><div class='cpName'>v02</div><div class='op'>0</div></td>
                </tr><tr>
                    <th>Row<br/>1</th>
                    <td class='null'><div class='cpName'>v10</div><div class='op'>0</div></td>
                    <td class='rotate'><div class='cpName'>v11</div><div class='op'><i>cos</i>(&theta;)</div></td>
                    <td class='rotate'><div class='cpName'>v12</div><div class='op'><i>sin</i>(&theta;)</div></td>
                </tr><tr>
                    <th>Row<br/>2</th>
                    <td class='null'><div class='cpName'>v20</div><div class='op'>0</div></td>
                    <td class='rotate'><div class='cpName'>v21</div><div class='op'>-<i>sin</i>(&theta;)</div></td>
                    <td class='rotate'><div class='cpName'>v22</div><div class='op'><i>cos</i>(&theta;)</div></td>
                </tr>
            </table>

        </td><td style='width: 33%;'>

            <table class='matrixDemo'>
                <tr><th colspan='4'>Rotation around the Y axis</th></tr>
                <tr><th></th><th>Col.<br/>0</th><th>Col.<br/>1</th><th>Col.<br/>2</th></tr>
                <tr>
                    <th>Row<br/>0</th>
                    <td class='rotate'><div class='cpName'>v00</div><div class='op'><i>cos</i>(&theta;)</div></td>
                    <td class='null'><div class='cpName'>v01</div><div class='op'>0</div></td>
                    <td class='rotate'><div class='cpName'>v02</div><div class='op'>-<i>sin</i>(&theta;)</div></td>
                </tr><tr>
                    <th>Row<br/>1</th>
                    <td class='null'><div class='cpName'>v10</div><div class='op'>0</div></td>
                    <td class='ident'><div class='cpName'>v11</div><div class='op'>1</div></td>
                    <td class='null'><div class='cpName'>v12</div><div class='op'>0</div></td>
                </tr><tr>
                    <th>Row<br/>2</th>
                    <td class='rotate'><div class='cpName'>v20</div><div class='op'><i>sin</i>(&theta;)</div></td>
                    <td class='null'><div class='cpName'>v21</div><div class='op'>0</div></td>
                    <td class='rotate'><div class='cpName'>v22</div><div class='op'><i>cos</i>(&theta;)</div></td>
                </tr>
            </table>

        </td><td style='width: 33%;'>

            <table class='matrixDemo'>
                <tr><th colspan='4'>Rotation around the Z axis</th></tr>
                <tr><th></th><th>Col.<br/>0</th><th>Col.<br/>1</th><th>Col.<br/>2</th></tr>
                <tr>
                    <th>Row<br/>0</th>
                    <td class='rotate'><div class='cpName'>v00</div><div class='op'><i>cos</i>(&theta;)</div></td>
                    <td class='rotate'><div class='cpName'>v01</div><div class='op'><i>sin</i>(&theta;)</div></td>
                    <td class='null'><div class='cpName'>v02</div><div class='op'>0</div></td>
                </tr><tr>
                    <th>Row<br/>1</th>
                    <td class='rotate'><div class='cpName'>v10</div><div class='op'>-<i>sin</i>(&theta;)</div></td>
                    <td class='rotate'><div class='cpName'>v11</div><div class='op'><i>cos</i>(&theta;)</div></td>
                    <td class='null'><div class='cpName'>v12</div><div class='op'>0</div></td>
                </tr><tr>
                    <th>Row<br/>2</th>
                    <td class='null'><div class='cpName'>v20</div><div class='op'>0</div></td>
                    <td class='null'><div class='cpName'>v21</div><div class='op'>0</div></td>
                    <td class='ident'><div class='cpName'>v22</div><div class='op'>1</div></td>
                </tr>
            </table>

        </td>
    </tr>
</table>

<p>Note the sign of the sine functions. These are specific to the left-handed
coordinate system that POV-Ray uses. In a right-handed system, you'd reverse the
signs.</p>

<p>If you want to know more, Jeff Lee's <a
href="https://www.shipbrook.net/jeff/raytrace/matrix.html">POV-Ray-specific
tutorial</a> is a good place to start, as are these <a
href="https://courses.cs.washington.edu/courses/cse457/99au/handouts/lectures/3d-transformations.pdf">course
notes</a>. To dig deeper than that&mdash;and there's a <em>lot</em> more you can
do with matrices&mdash;the topic is covered in depth in 3D graphics and linear
algebra textbooks. And don't be scared off: it's far more tedious than
difficult. Choose a simple shape, try fiddling with different elements and
different functions, and look at the results of a rendering.</p>


<h2>Appendix B: CephaloPOV Internals</h2>

<pre>The gsDef, ioDef, primitiveDef, and objDef objects follow similar forms and
are mainly used by codegen.js to crank out the mountain of repetitive boiler-
plate code needed to manage POV-Ray's large set of objects and values.

   gsDef ........... Defines the parameters of the global_settings block.

   ioDef ........... Defines the parameters of POV-Ray's image options, which
                     may be output as .ini files or as CLI switches.

   primitiveDef .... Defines the members of the Primitive base class from
                     which all geometric primitives plus CSG objects, lights,
                     and cameras are subclassed.

   objDef .......... Defines all of the subclasses of Primitive.

They each use some or all of the following parameters:

   desc ......... A human-readable description of the object or class, to be
                  placed in a header comment in the generated code.

   conArgs ...... Custom constructor arguments, supplied as a string.

   conBlock ..... Name of the snippet to be placed in the constructor in
                  lieu of the default code.

   snippets ..... List of snippets to append to the class after the standard
                  accessor methods.

   superclass ... Name of superclass; causes generation of extends clause and
                  automatically calls super() in the constructor.

   immutable .... Read-only properties of the object. These are:

                      csg:    Is this a CSG primitive, e.g., Union or Merge.
                      finite: Is this a finite primitive?
                      solid:  Is this a solid primitive?
                      pseudo: Is this an object that isn't actually a
                              POV-Ray primitive that CephaloPOV does extra
                              work to get it to behave like one? Currently,
                              this is only true for Camera.

   mutable ...... Read-write properties of the object. These are:

                      name:   Name of the property, e.g. assumedGamma
                      valid:  Validation conditional
                      err:    Error message to display on validation failure
                      req:    If true, this value must be set before output
                      custom: The name of the snippet to substitute for the
                              auto-generated accessor methods.
                      child:  "scalar" or "array" indicates that this
                              property is itself a primitive or array of
                              primitives whose parent property should be
                              updated upon assignment.

cpov.vectorDef follows the same format, but the odds of it being entirely
replaced before the first public beta are quite high.</pre>




<h2>TODO</h2>

<h3>Milestone C0: Core system implementation and shakedown</h3>

<table class='sgrid todo'>
    <thead>
        <tr>
            <th>Status</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    <thead><tbody>
        <!-- <tr><td></td><td></td><td></td></tr> -->
        <tr><td class='working'>In Progress</td><td>Implement</td><td>Regression test script(s)</td></tr>
        <tr><td class='pending'>Pending</td><td>Implement/Test</td><td>Ease-of-use refinements for initializers and assignments, esp. <code>Vector*/Color</code> and <code>Matrix</code></td></tr>
        <tr><td class='pending'>Pending</td><td>Implement/Test</td><td>Internal POV-Ray default font support for <code>Text</code></td></tr>
        <tr><td class='done'>Done</td><td>Implement/Test</td><td><strike>Optional skip first indent in toSDL functions</strike> Fixed output bugs.</td></tr>
        <tr><td class='done'>Done</td><td>Implement/Test</td><td>"<code>stamp()</code>" (come up with better name? snapshot?)</td></tr>
        <tr><td class='done'>Done</td><td>Implement/Test</td><td><code>--preamble</code></td></tr>
        <tr><td class='done'>Done</td><td>Implement/Test</td><td><code>--sdlIncludes</code></td></tr>
        <tr><td class='done'>Done</td><td>Implement</td><td><code>--debug</code> levels as with <code>--verbose</code></td></tr>
        <tr><td class='done'>Done</td><td>Implement</td><td>Allow fatal errors if <code>cpov.debug == 2</code></td></tr>
        <tr><td class='done'>Done</td><td>Implement</td><td>Debug log if <code>cpov.debug == 2</code></td></tr>
        <tr><td class='done'>Done</td><td>Implement</td><td>Route all <code>cpov.error</code> messages to debug log if applicable.</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>imageOptions</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>globalSettings</td></tr>
        <tr><td class='done'>Done</td><td>Implement/Test</td><td>For Color vectors in globalSettings, add .toPlainRGBVector</td></tr>
        <tr><td class='done'>Done</td><td>Implement/Test</td><td>For array output generally, add .join(", ") for readability over native .toString()</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>bicubicPatch</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>blob</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>box</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>cone</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>cubic</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>cylinder</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>disc</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>heightField</td></tr>
        <tr><td class='done'>Done</td><td>Implement/Test</td><td>isoSurface + IsoSurface.toSDL</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>juliaFractal</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>lathe</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>mesh</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>ovus</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>parametric</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>plane</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>poly</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>polygon</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>polynomial</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>prism</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>quadric</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>quartic</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>sor</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>sphere</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>sphereSweep</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>superellipsoid</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>text</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>torus</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>triangle</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>CSG: union</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>CSG: intersection</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>CSG: merge</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>CSG: difference</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>Special: camera</td></tr>
        <tr><td class='done'>Done</td><td>Test</td><td>Special: lightSource</td></tr>
        <tr><td class='done'>Done</td><td>Implement/Test</td><td>Respect <code>imageOptions.createIni</code></td></tr>
    </tbody>
</table>


<h3>Milestone C1: Preparation for public beta</h3>

<table class='sgrid todo'>
    <thead>
        <tr>
            <th>Status</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    <thead><tbody>
        <!-- <tr><td></td><td></td><td></td></tr> -->
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Documentation illustration generator script, further tests</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'>Illustration stage generator: solid checkered platform, n x n</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'>Illustration stage generator: translucent XYZ planes, n x n</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'>All geometric primitives</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Transformation validation and fixes</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Array of arrays or objects to vectors</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Atmospheric effects</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>Camera</code></td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'>Pseudo-primitive in CSG integration</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'>Pseudo-primitive transform integration</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>Camera.angle</code>: Determine legal values and enforce</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>Camera.type</code>: replace SDL literals with camelCased cpov versions</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>copy()</code> method across classes, both shallow and deep</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>cpov.js</code>: More selective scope management</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Documentation generation</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Execution: Optionally generate .sh/.bat files</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Execution: Oversee execution directly</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>ImageOptions</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>ImageOptions.boundingThreshold</code>: convert zero to boolean on output</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>ImageOptions.constants</code>: gets special handling</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>ImageOptions.endColumn</code>: post check startColumn</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>ImageOptions.endRow</code>: post check startRow</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>ImageOptions.startColumn</code>: post check endColumn</td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>ImageOptions.startRow</code>: post check endRow</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Intelligent handling of paths to files, esp. Windows</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>Lathe</code>: add check for correct minimum number of points</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>LightSource</code></td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>LightSource.looksLike</code></td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>LightSource.mediaAttenuation</code></td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>LightSource.mediaInteraction</code></td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>LightSource.projectedThrough</code></td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Management of array attributes</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>Matrix, Vector, Color</code>: Use JS/SDL func in lieu of individual attributes</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>Matrix</code>: Improve constructor validation</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>Mesh/Triangle</code>: Improve constructor validation</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'>Compact output format for Triangles in Mesh</td></tr>
        <tr><td class='tbd'>TDB</td><td>Implement/Test</td><td class='subtask'>uvVectors member in Triangle, ck Mesh compatibility.</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>Mesh2</code></td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>Primitive</code></td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>Primitive.boundedBy: "cpov.inheritsFrom('Primitive') ",  // TODO: limit to actual allowable Primitives.</code></td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>Primitive.interior</code></td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>Primitive.interiorTexture</code></td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>Primitive.photons</code></td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>Primitive.radiosity</code></td></tr>
            <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td class='subtask'><code>Primitive.texture</code></td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Reorg: Move things needed for codegen to separate file not included at runtime</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Reorg: Script to pretty-print definition files</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Reports</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td><code>Text.toSDL</code>: Handle escaping of double quotes in <code>Text.displayText</code></td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Untangle internal dependencies</td></tr>
        <tr><td class='tbd'>TBD</td><td>Implement/Test</td><td>Wrap Array attributes with Proxies to enforce type</td></tr>
    </tbody>
</table>

<h3>Backlog</h3>

<table class='sgrid todo'>
    <thead>
        <tr>
            <th>Status</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    <thead><tbody>
        <!-- <tr><td></td><td></td><td></td></tr> -->
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Additional splines, easing functions, esp. Catmull-Rom</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Angles in the unit interval</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Atmospheric effects</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Color and texture SDL generation, i.e., in separate file to use directly with POV-Ray</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Direct support for ffmpeg/avisynth + Google speech API</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Drag in some color libraries, theme generators</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Eric Haines' table of object intersections, collision detection</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Extensive warn, info, debug output</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Geometric query system</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>https://www.npmjs.com/package/ml-matrix</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Interior</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Level-of-Detail</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Macro/Function generation, i.e., in separate file to use directly with POV-Ray</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Output frame range</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Parametric types</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Particle systems</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Polyhedron library</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Porting of functions in .inc files</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Primitive</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Script execution on events</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Script to parse as much as possible of POV-Ray .inc files into JS/cpov</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Spline-builder UI</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Stereo pseudo-cameras</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>Texture</td></tr>
        <tr><td class='tbd'>TBD</td><td>TBD</td><td>tick order</td></tr>
    </tbody>
</table>


<h4>CephaloPOV Scene Graph</h4>

<p>Master objects are defined relative to the origin. More precisely, the origin is
their primary point of articulation. In each frame, they are transformed to
their current frame-state.</p>

<p>Possibly, a relationship between A and B is stated in the form of B's point of
articulation relative to some explicit or implicit point in A. In its most basic
form, this would amount to free movement of B relative to its attachment point
to A. PSII could provide a set of standard constraints, e.g., ball joint, hinge,
track, etc., which could be built upon or supplanted by the user.</p>

<p>This suggests a separate assembly process for objects with moving parts, which
means that ordinary native CSG objects can go ahead just fine. Converting them
into master objects amounts to just positioning them appropriately relative to
the origin after construction.</p>


<h2>Changelog</h2>

<p>Oh geez, not yet.</p>

</body>
</html>